

#  Лабораторная работа №9


## Описание проекта

Сервис предоставляет REST-API для управления бонусной программой. Пользователи могут:

- Получать JWT-токены для доступа к защищённым ресурсам.
- Просматривать текущий уровень бонусов и кешбэк.
- Добавлять транзакции, которые влияют на их уровень бонусов.

### Бонусные уровни

| Уровень    | Траты (₽)       | Кешбэк (%) |
|------------|-----------------|------------|
| Silver     | 0 - 999        | 1          |
| Gold       | 1000 - 4999     | 5          |
| Platinum   | 5000+           | 15          |



## Установка и запуск




### 1. Применение миграций

```bash
python manage.py makemigrations
python manage.py migrate
```

### 2. Создание суперпользователя

```bash
python manage.py createsuperuser
```

### 3. Запуск сервера разработки

```bash
python manage.py runserver
```

Приложение будет доступно по адресу [http://127.0.0.1:8000](http://127.0.0.1:8000).

---

## API Эндпоинты

### 1. Получение JWT-токена

**POST /auth/login/**  

Пример запроса:

```json
{
  "username": "user1",
  "password": "password123"
}
```

Пример ответа:

```json
{
  "access": "eyJhbGciOiJIUzI1NiIs..."
}
```

---

### 2. Информация о бонусах

**GET /users/bonus/**  

Заголовок: `Authorization: Bearer <access_token>`  

Пример ответа:

```json
{
  "username": "user1",
  "spending": 2500.0,
  "bonus_level": "Gold",
  "cashback": 0.05
}
```

---

### 3. Добавление транзакции

**POST /users/transactions/**  

Пример запроса:  
Заголовок: `Authorization: Bearer <access_token>`  

```json
{
  "amount": 2000
}
```

Пример ответа:

```json
{
  "message": "Transaction added successfully"
}
```

---

## Логика работы системы

1. При добавлении транзакции обновляются траты пользователя.
2. Уровень бонуса автоматически пересчитывается.
3. Текущие траты и уровень доступны через эндпоинт `/users/bonus/`.

---

